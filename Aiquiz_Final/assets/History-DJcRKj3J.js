import{u as m,j as e,S as c,c as i,b as h}from"./index-BgPws11A.js";import{r as a,L as n}from"./vendor-D8AvkUoV.js";import{Q as p,v as y,s as g,w as f}from"./ui-CEq2p6SN.js";function b(){const{user:r}=m(),[l,o]=a.useState([]),[x,d]=a.useState(!0);return a.useEffect(()=>{(async()=>{if(r)try{const t=await h.get("/quiz/history.php");o(t.data.attempts||[])}catch(t){console.error("Error fetching history:",t)}finally{d(!1)}})()},[r]),x?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsx(c,{className:"h-10 w-48"}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-4",children:[1,2,3,4,5].map(s=>e.jsx(c,{className:"h-16 w-full"},s))})]}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(n,{to:"/dashboard",className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(p,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quiz History"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:l.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-gray-500",children:[e.jsx("thead",{className:"bg-gray-50 text-xs uppercase text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Topic"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Date"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Score"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Time"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-right",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[s.config?.categories?.join(", ")||"General Quiz",e.jsxs("div",{className:"text-xs text-gray-400 font-normal mt-0.5 capitalize",children:[s.config?.difficulty," Difficulty"]})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"w-4 h-4 mr-2 text-gray-400"}),new Date(s.created_at).toLocaleDateString()]}),e.jsx("div",{className:"text-xs text-gray-400 mt-0.5 ml-6",children:new Date(s.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"px-6 py-4",children:s.status==="completed"?e.jsxs("span",{className:i("px-2.5 py-0.5 rounded-full text-xs font-medium",(s.score||0)>=80?"bg-green-100 text-green-800":(s.score||0)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[s.score,"%"]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4",children:s.time_spent_seconds?e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"w-4 h-4 mr-2 text-gray-400"}),Math.floor(s.time_spent_seconds/60),"m ",s.time_spent_seconds%60,"s"]}):"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:i("px-2.5 py-0.5 rounded-full text-xs font-medium capitalize",s.status==="completed"?"bg-blue-100 text-blue-800":s.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:s.status.replace("_"," ")})})]},s.id))})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(f,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No quizzes taken yet"}),e.jsx("p",{className:"text-gray-500 mt-2 max-w-sm",children:"You haven't taken any quizzes yet. Start your first quiz to see your history here!"}),e.jsx(n,{to:"/quiz-config",className:"mt-6 inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-primary-600 hover:bg-primary-700 transition-all",children:"Start New Quiz"})]})})]})}export{b as History};
