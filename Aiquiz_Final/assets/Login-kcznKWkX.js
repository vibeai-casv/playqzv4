import{u,j as e,a as f}from"./index-BgPws11A.js";import{r as c,u as p,L as j}from"./vendor-D8AvkUoV.js";import{l as b,A as N}from"./auth-DJ41BtxL.js";import{u as v,a as y}from"./schemas-BznUp_a-.js";import{k as w,l as S,i as x}from"./ui-CEq2p6SN.js";import"./compat-DOTGHHbm.js";const L=()=>{const[a,i]=c.useState(!1),[s,d]=c.useState(null),{signIn:g}=u(),m=p(),t=v({resolver:y(b),defaultValues:{rememberMe:!1,identifier:"",password:""}}),h=async o=>{try{i(!0),d(null),await g({email:o.identifier,password:o.password,rememberMe:o.rememberMe}),x.success("Welcome back!"),m("/dashboard")}catch(r){console.error("Login error detail:",r);let n="Failed to sign in",l={message:n};f.isAxiosError(r)?(l={message:r.message,code:r.code,url:r.config?.url,baseUrl:r.config?.baseURL,method:r.config?.method?.toUpperCase(),status:r.response?.status,data:r.response?.data},n=r.message==="Network Error"?`Network Error (Request to ${r.config?.baseURL}${r.config?.url} failed)`:r.message):r instanceof Error&&(l={message:r.message},n=r.message),d(l),x.error(n)}finally{i(!1)}};return e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:"Welcome Back"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Sign in to access your personalized AI learning path"})]}),e.jsxs("form",{onSubmit:t.handleSubmit(h),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{...t.register("identifier"),placeholder:"Email or Mobile Number",className:"input-vibeai"}),t.formState.errors.identifier&&e.jsx("p",{className:"text-xs text-destructive mt-1 ml-1",children:t.formState.errors.identifier.message})]}),e.jsxs("div",{children:[e.jsx("input",{...t.register("password"),type:"password",placeholder:"Password",className:"input-vibeai"}),t.formState.errors.password&&e.jsx("p",{className:"text-xs text-destructive mt-1 ml-1",children:t.formState.errors.password.message})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",...t.register("rememberMe"),className:"rounded border-border bg-input text-primary focus:ring-primary/50 focus:ring-offset-0"}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-foreground transition-colors",children:"Remember me"})]}),e.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 hover:underline transition-colors",children:"Forgot password?"})]}),e.jsxs("div",{className:"flex w-full gap-2",children:[e.jsx("button",{type:"button",onClick:()=>m("/demo"),className:"btn-vibeai w-1/2 flex items-center justify-center gap-2",children:"Demo"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-vibeai w-1/2 flex items-center justify-center gap-2",children:a?e.jsx(w,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Sign In ",e.jsx(S,{className:"w-4 h-4"})]})})]})]}),s&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-destructive/10 border border-destructive/20 text-xs font-mono overflow-auto max-h-48 space-y-2",children:[e.jsx("p",{className:"font-bold text-destructive",children:"Diagnostic Information:"}),e.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-x-2 gap-y-1 text-muted-foreground",children:[e.jsx("span",{children:"Message:"})," ",e.jsx("span",{className:"text-foreground",children:s.message}),s.code&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Code:"})," ",e.jsx("span",{className:"text-foreground",children:s.code})]}),s.method&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Method:"})," ",e.jsx("span",{className:"text-foreground",children:s.method})]}),s.baseUrl&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Base URL:"})," ",e.jsx("span",{className:"text-foreground",children:s.baseUrl})]}),s.url&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Endpoint:"})," ",e.jsx("span",{className:"text-foreground",children:s.url})]}),s.status&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Status:"})," ",e.jsx("span",{className:"text-foreground",children:s.status})]})]}),s.data&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-destructive/10",children:[e.jsx("p",{className:"mb-1 text-destructive/70 italic",children:"Response Data:"}),e.jsx("pre",{className:"p-2 bg-black/20 rounded whitespace-pre-wrap",children:JSON.stringify(s.data,null,2)})]})]})]})},U=()=>{const{isAuthenticated:a,isLoading:i}=u(),s=p();return c.useEffect(()=>{!i&&a&&s("/dashboard",{replace:!0})},[a,i,s]),i&&a?null:e.jsxs(N,{children:[e.jsx(L,{}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(j,{to:"/signup",className:"font-medium text-primary hover:text-primary/80 hover:underline transition-all",children:"Create one now"})]})]})};export{U as Login};
