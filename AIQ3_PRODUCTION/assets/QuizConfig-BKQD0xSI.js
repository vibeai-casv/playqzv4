import{j as e,c as o,a as D}from"./index-Cpj8tOwa.js";import{r as p,u as G}from"./vendor-D8AvkUoV.js";import{u as O,a as R,o as F,c as J,s as P,_ as I}from"./schemas-BznUp_a-.js";import{u as U}from"./quizStore-DZUZ-Exo.js";import{Z as V,k as B,x as H,s as K,y as Z,C as X,w as Y,B as T,U as $,z as W,E as ee,G as se,m as te,J as ae}from"./ui-mytIhYa7.js";function re(){const{currentAttempt:b,questions:i,responses:N,currentQuestionIndex:a,timeRemaining:y,isLoading:c,generateQuiz:n,startAttempt:w,submitAnswer:_,nextQuestion:v,previousQuestion:h,submitQuiz:Q,resetQuiz:C,setTimeRemaining:S}=U(),u=i[a],E=u?N.get(u.id):void 0,L={current:a+1,total:i.length,percentage:i.length>0?(a+1)/i.length*100:0},r=a===0,d=a===i.length-1,z=i.every(x=>N.has(x.id));return{currentAttempt:b,questions:i,currentQuestion:u,currentResponse:E,timeRemaining:y,isLoading:c,progress:L,isFirstQuestion:r,isLastQuestion:d,allAnswered:z,generateQuiz:async x=>{await n(x)},startAttempt:w,submitAnswer:(x,s)=>{u&&_(u.id,x,s)},nextQuestion:v,previousQuestion:h,submitQuiz:Q,resetQuiz:C,setTimeRemaining:S}}const ie=F({numQuestions:I(["3","5","10","20","50"]),difficulty:I(["Easy","Medium","Hard","Mixed"]),categories:J(P()).min(1,{message:"Select at least one category"})}),j={"Latest Developments":{icon:e.jsx(ae,{className:"w-5 h-5"}),gradient:"from-blue-500 to-cyan-500"},"AI Safety":{icon:e.jsx(te,{className:"w-5 h-5"}),gradient:"from-emerald-500 to-teal-500"},Robotics:{icon:e.jsx(se,{className:"w-5 h-5"}),gradient:"from-orange-500 to-amber-500"},"Quantum Computing":{icon:e.jsx(ee,{className:"w-5 h-5"}),gradient:"from-violet-500 to-purple-500"},"Generative AI":{icon:e.jsx(W,{className:"w-5 h-5"}),gradient:"from-pink-500 to-rose-500"},Personalities:{icon:e.jsx($,{className:"w-5 h-5"}),gradient:"from-indigo-500 to-blue-500"},Brands:{icon:e.jsx(T,{className:"w-5 h-5"}),gradient:"from-yellow-500 to-orange-500"}};function me(){const{register:b,handleSubmit:i,watch:N,formState:{errors:a,isValid:y},setValue:c}=O({resolver:R(ie),mode:"onChange",defaultValues:{numQuestions:"5",difficulty:"Mixed",categories:[]}}),[n,w]=p.useState([]),[_,v]=p.useState(!1),[h,Q]=p.useState(!1),[C,S]=p.useState(null),u=G(),{generateQuiz:E}=re();p.useEffect(()=>{(async()=>{v(!0);try{const m=(await D.get("/questions/stats.php")).data.stats,l=Object.entries(m).map(([g,A])=>{const f=j[g]||{icon:e.jsx(T,{className:"w-5 h-5"}),gradient:"from-slate-500 to-gray-500"};return{name:g,available:Number(A),icon:f.icon,gradient:f.gradient}});l.sort((g,A)=>{const f=!!j[g.name],M=!!j[A.name];return f&&!M?-1:!f&&M?1:g.name.localeCompare(A.name)}),w(l)}catch(t){console.error("Failed to fetch category counts",t);const m=Object.keys(j).map(l=>({name:l,available:0,...j[l]}));w(m)}finally{v(!1)}})()},[]),p.useEffect(()=>{const s=localStorage.getItem("quizConfig");if(s)try{const t=JSON.parse(s);c("numQuestions",t.numQuestions);const m=t.difficulty||"Mixed",l=m.charAt(0).toUpperCase()+m.slice(1).toLowerCase();c("difficulty",l),c("categories",t.categories)}catch{}},[c]);const L=async s=>{S(null),Q(!0),localStorage.setItem("quizConfig",JSON.stringify(s));try{const t={numQuestions:Number(s.numQuestions),difficulty:s.difficulty.toLowerCase(),categories:s.categories,timeLimit:Number(s.numQuestions)*30,includeExplanations:!0};await E(t),u("/take-quiz")}catch(t){S(t instanceof Error?t.message:"Failed to generate quiz")}finally{Q(!1)}},r=N(),d=r.categories,z=d.reduce((s,t)=>{const m=n.find(l=>l.name===t);return s+(m?.available||0)},0),k=z<Number(r.numQuestions),q=Number(r.numQuestions)*30,x=()=>{d.length===n.length?c("categories",[]):c("categories",n.map(s=>s.name))};return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Configure Quiz"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Customize your assessment parameters"})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl border border-primary/20",children:e.jsx(V,{className:"w-6 h-6 text-primary"})})})]}),e.jsx("form",{onSubmit:i(L),className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-500/20 text-blue-400 flex items-center justify-center mr-3 text-sm font-bold",children:"1"}),"Number of Questions"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:["3","5","10","20","50"].map(s=>e.jsxs("label",{className:o("relative flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer transition-all duration-200 border-2",r.numQuestions===s?"bg-primary/10 border-primary shadow-[0_0_20px_-5px_rgba(0,212,255,0.5)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsx("input",{type:"radio",value:s,...b("numQuestions"),className:"hidden"}),e.jsx("span",{className:o("text-2xl font-bold mb-1",r.numQuestions===s?"text-primary":"text-white"),children:s}),e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-medium",children:"Questions"})]},s))}),a.numQuestions&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.numQuestions.message})]}),e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-purple-500/20 text-purple-400 flex items-center justify-center mr-3 text-sm font-bold",children:"2"}),"Difficulty Level"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:["Easy","Medium","Hard","Mixed"].map(s=>e.jsxs("label",{className:o("relative flex items-center justify-center p-4 rounded-2xl cursor-pointer transition-all duration-200 border-2",r.difficulty===s?"bg-cyan-500/10 border-cyan-500 shadow-[0_0_20px_-5px_rgba(6,182,212,0.5)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsx("input",{type:"radio",value:s,...b("difficulty"),className:"hidden"}),e.jsx("span",{className:o("font-bold",r.difficulty===s?"text-cyan-400":"text-slate-300"),children:s})]},s))}),a.difficulty&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.difficulty.message})]}),e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 text-emerald-400 flex items-center justify-center mr-3 text-sm font-bold",children:"3"}),"Topics"]}),e.jsx("button",{type:"button",onClick:x,className:"text-sm text-primary hover:text-primary/80 font-medium transition-colors",children:d.length===n.length&&n.length>0?"Deselect All":"Select All"})]}),_?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(B,{className:"w-8 h-8 animate-spin text-emerald-500"})}):n.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No topics available."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(s=>{const t=d.includes(s.name);return e.jsxs("label",{className:o("group relative flex items-center p-4 rounded-2xl cursor-pointer transition-all duration-200 border-2 overflow-hidden",t?"bg-emerald-500/10 border-emerald-500 shadow-[0_0_20px_-5px_rgba(16,185,129,0.3)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsx("div",{className:o("absolute inset-0 opacity-0 transition-opacity duration-300",t?"opacity-100":"group-hover:opacity-10"),children:e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${s.gradient} opacity-5`})}),e.jsx("input",{type:"checkbox",value:s.name,...b("categories"),className:"hidden"}),e.jsx("div",{className:o("p-3 rounded-xl mr-4 transition-colors",t?"bg-emerald-500/20 text-emerald-400":"bg-white/5 text-slate-400 group-hover:text-white"),children:s.icon}),e.jsxs("div",{className:"flex-1 relative z-10",children:[e.jsx("p",{className:o("font-bold transition-colors",t?"text-white":"text-slate-300 group-hover:text-white"),children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.available," questions"]})]}),t&&e.jsx(H,{className:"w-6 h-6 text-emerald-500 animate-in zoom-in duration-200"})]},s.name)})}),a.categories&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.categories.message})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-8 space-y-6",children:e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Summary"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-white/5",children:[e.jsx("span",{className:"text-slate-400",children:"Questions"}),e.jsx("span",{className:"font-bold text-white",children:r.numQuestions})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-white/5",children:[e.jsx("span",{className:"text-slate-400",children:"Difficulty"}),e.jsx("span",{className:"font-bold text-white",children:r.difficulty})]}),e.jsxs("div",{className:"py-3 border-b border-white/5",children:[e.jsx("span",{className:"text-slate-400 block mb-2",children:"Topics"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.length>0?d.map(s=>e.jsx("span",{className:"px-2 py-1 rounded-lg bg-white/5 text-xs text-slate-300 border border-white/5",children:s},s)):e.jsx("span",{className:"text-slate-600 text-sm italic",children:"None selected"})})]}),e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsxs("span",{className:"text-slate-400 flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-2"})," Est. Time"]}),e.jsxs("span",{className:"font-bold text-primary",children:[Math.round(q/60)," min ",q%60,"s"]})]})]}),k&&e.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-start",children:[e.jsx(Z,{className:"w-5 h-5 text-red-400 mr-3 shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-red-400",children:["Selected topics have ",z," questions, but you requested ",r.numQuestions,"."]})]}),e.jsxs("button",{type:"submit",disabled:!y||k||h,className:o("w-full flex items-center justify-center px-8 py-4 text-base font-bold rounded-xl shadow-lg transition-all duration-300 transform hover:-translate-y-1",!y||k||h?"bg-slate-800 text-slate-500 cursor-not-allowed":"btn-vibeai"),children:[h?e.jsx(B,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(X,{className:"w-5 h-5 mr-2"}),h?"Generating...":"Start Quiz"]}),C&&e.jsxs("p",{className:"mt-4 text-sm text-red-400 flex items-center justify-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"})," ",C]})]})})})]})})]})}export{me as QuizConfig};
