import{f as c,j as e}from"./index-Cpj8tOwa.js";import{r as n}from"./vendor-D8AvkUoV.js";import{ai as C,k as E,X as S,Y as T,aq as Q}from"./ui-mytIhYa7.js";function P(){const[l,g]=n.useState([]),[f,b]=n.useState([]),[i,u]=n.useState(""),[h,x]=n.useState(!1),[y,d]=n.useState(null),[r,o]=n.useState({});n.useEffect(()=>{j()},[]),n.useEffect(()=>{i&&m()},[i]);const j=async()=>{try{const t=await c("/questions/types.php");b(t.types||[]),t.types&&t.types.length>0&&u(t.types[0])}catch(t){console.error("Failed to load question types",t)}},m=async()=>{x(!0);try{const t=await c(`/questions/list.php?type=${i}&limit=1000`);g(t.data||[])}catch(t){console.error("Failed to load questions",t)}finally{x(!1)}},v=t=>{d(t.id),o({question_text:t.question_text,options:t.options,correct_answer:t.correct_answer,explanation:t.explanation,category:t.category,difficulty:t.difficulty,points:t.points})},N=()=>{d(null),o({})},w=async t=>{try{await c(`/questions/update.php?id=${t}`,{method:"PUT",body:JSON.stringify(r)}),alert("Question updated successfully!"),d(null),o({}),m()}catch(s){alert(s.message||"Failed to update question")}},_=t=>({text_mcq:"Multiple Choice",image_identify_logo:"Logo Identification",image_identify_person:"Personality Identification",true_false:"True/False",short_answer:"Short Answer"})[t]||t;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bulk Edit Questions"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Edit multiple questions filtered by type"})]})}),e.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Question Type"}),e.jsx("select",{value:i,onChange:t=>u(t.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:f.map(t=>e.jsx("option",{value:t,children:_(t)},t))})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.length," question",l.length!==1?"s":""," found"]})]})}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-primary"})}):l.length===0?e.jsx("div",{className:"text-center py-12 bg-card border border-border rounded-xl",children:e.jsx("p",{className:"text-muted-foreground",children:"No questions found for this type"})}):e.jsx("div",{className:"space-y-4",children:l.map(t=>e.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:border-primary/50 transition-colors",children:y===t.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Question Text"}),e.jsx("textarea",{value:r.question_text||"",onChange:s=>o({...r,question_text:s.target.value}),rows:3,className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(t.question_type==="text_mcq"||t.question_type==="image_identify_logo"||t.question_type==="image_identify_person")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Options"}),r.options?.map((s,a)=>e.jsx("input",{type:"text",value:s,onChange:k=>{const p=[...r.options||[]];p[a]=k.target.value,o({...r,options:p})},className:"w-full px-4 py-2 mb-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`Option ${a+1}`},a))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Correct Answer"}),e.jsx("input",{type:"text",value:r.correct_answer||"",onChange:s=>o({...r,correct_answer:s.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Points"}),e.jsx("input",{type:"number",value:r.points||10,onChange:s=>o({...r,points:parseInt(s.target.value)}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),e.jsx("input",{type:"text",value:r.category||"",onChange:s=>o({...r,category:s.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty"}),e.jsxs("select",{value:r.difficulty||"medium",onChange:s=>o({...r,difficulty:s.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Explanation"}),e.jsx("textarea",{value:r.explanation||"",onChange:s=>o({...r,explanation:s.target.value}),rows:2,className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs("button",{onClick:N,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted/50 transition-colors flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Cancel"]}),e.jsxs("button",{onClick:()=>w(t.id),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Save Changes"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:t.question_text}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded",children:t.category}),e.jsx("span",{className:"capitalize",children:t.difficulty}),e.jsxs("span",{children:[t.points," points"]}),e.jsx("span",{className:t.is_active?"text-green-500":"text-yellow-500",children:t.is_active?"Active":"Inactive"})]})]}),e.jsxs("button",{onClick:()=>v(t),className:"px-3 py-1.5 border border-border rounded-lg hover:bg-muted/50 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Q,{className:"w-4 h-4"}),"Edit"]})]}),t.options&&t.options.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Options:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.options.map((s,a)=>e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm ${s===t.correct_answer?"bg-green-500/10 text-green-500 border border-green-500/30":"bg-muted/50 text-muted-foreground"}`,children:s},a))})]}),t.explanation&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.explanation})]})},t.id))})]})}export{P as BulkEditQuestions};
