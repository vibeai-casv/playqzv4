import{j as e,c as n,a as _}from"./index-CtFufLgh.js";import{r as m,u as E}from"./vendor-D8AvkUoV.js";import{u as L,a as q,o as I,c as B,_ as z}from"./schemas-BznUp_a-.js";import{u as R}from"./quizStore-DfslfZDa.js";import{Z as T,q as G,m as M,r as D,e as F,C as O,p as P,s as V,h as H,B as J,u as U,v as Z,U as $,w as X}from"./ui-CX4g-7i5.js";function Y(){const{currentAttempt:u,questions:i,responses:p,currentQuestionIndex:a,timeRemaining:b,isLoading:o,generateQuiz:g,startAttempt:w,submitAnswer:v,nextQuestion:f,previousQuestion:c,submitQuiz:j,resetQuiz:N,setTimeRemaining:y}=R(),l=i[a],Q=l?p.get(l.id):void 0,C={current:a+1,total:i.length,percentage:i.length>0?(a+1)/i.length*100:0},r=a===0,d=a===i.length-1,x=i.every(t=>p.has(t.id));return{currentAttempt:u,questions:i,currentQuestion:l,currentResponse:Q,timeRemaining:b,isLoading:o,progress:C,isFirstQuestion:r,isLastQuestion:d,allAnswered:x,generateQuiz:async t=>{await g(t)},startAttempt:w,submitAnswer:(t,h)=>{l&&v(l.id,t,h)},nextQuestion:f,previousQuestion:c,submitQuiz:j,resetQuiz:N,setTimeRemaining:y}}const K=I({numQuestions:z(["5","10","20","50"]),difficulty:z(["Easy","Medium","Hard","Mixed"]),categories:B(z(["Latest Developments","AI Safety","Robotics","Quantum Computing","Generative AI","Personalities","Brands"])).min(1,{message:"Select at least one category"})}),W=[{name:"Latest Developments",icon:e.jsx(V,{className:"w-5 h-5"}),available:0,gradient:"from-blue-500 to-cyan-500"},{name:"AI Safety",icon:e.jsx(H,{className:"w-5 h-5"}),available:0,gradient:"from-emerald-500 to-teal-500"},{name:"Robotics",icon:e.jsx(J,{className:"w-5 h-5"}),available:0,gradient:"from-orange-500 to-amber-500"},{name:"Quantum Computing",icon:e.jsx(U,{className:"w-5 h-5"}),available:0,gradient:"from-violet-500 to-purple-500"},{name:"Generative AI",icon:e.jsx(Z,{className:"w-5 h-5"}),available:0,gradient:"from-pink-500 to-rose-500"},{name:"Personalities",icon:e.jsx($,{className:"w-5 h-5"}),available:0,gradient:"from-indigo-500 to-blue-500"},{name:"Brands",icon:e.jsx(X,{className:"w-5 h-5"}),available:0,gradient:"from-yellow-500 to-orange-500"}];function ie(){const{register:u,handleSubmit:i,watch:p,formState:{errors:a,isValid:b},setValue:o}=L({resolver:q(K),mode:"onChange",defaultValues:{numQuestions:"10",difficulty:"Mixed",categories:[]}}),[g,w]=m.useState(W),[v,f]=m.useState(!1),[c,j]=m.useState(!1),[N,y]=m.useState(null),l=E(),{generateQuiz:Q}=Y();m.useEffect(()=>{(async()=>{f(!0);try{const h=(await _.get("/questions/stats.php")).data.stats;w(A=>A.map(k=>({...k,available:h[k.name]??0})))}catch(t){console.error("Failed to fetch category counts",t)}finally{f(!1)}})()},[]),m.useEffect(()=>{const s=localStorage.getItem("quizConfig");if(s)try{const t=JSON.parse(s);o("numQuestions",t.numQuestions),o("difficulty",t.difficulty),o("categories",t.categories)}catch{}},[o]);const C=async s=>{y(null),j(!0),localStorage.setItem("quizConfig",JSON.stringify(s));try{const t={numQuestions:Number(s.numQuestions),difficulty:s.difficulty.toLowerCase(),categories:s.categories,timeLimit:Number(s.numQuestions)*30,includeExplanations:!0};await Q(t),l("/take-quiz")}catch(t){y(t instanceof Error?t.message:"Failed to generate quiz")}finally{j(!1)}},r=p(),d=r.categories,x=d.some(s=>{const t=g.find(h=>h.name===s);return t&&t.available<Number(r.numQuestions)}),S=Number(r.numQuestions)*30;return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Configure Quiz"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Customize your assessment parameters"})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl border border-primary/20",children:e.jsx(T,{className:"w-6 h-6 text-primary"})})})]}),e.jsx("form",{onSubmit:i(C),className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-500/20 text-blue-400 flex items-center justify-center mr-3 text-sm font-bold",children:"1"}),"Number of Questions"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:["5","10","20","50"].map(s=>e.jsxs("label",{className:n("relative flex flex-col items-center justify-center p-4 rounded-2xl cursor-pointer transition-all duration-200 border-2",r.numQuestions===s?"bg-primary/10 border-primary shadow-[0_0_20px_-5px_rgba(0,212,255,0.5)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsx("input",{type:"radio",value:s,...u("numQuestions"),className:"hidden"}),e.jsx("span",{className:n("text-2xl font-bold mb-1",r.numQuestions===s?"text-primary":"text-white"),children:s}),e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-medium",children:"Questions"})]},s))}),a.numQuestions&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.numQuestions.message})]}),e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-purple-500/20 text-purple-400 flex items-center justify-center mr-3 text-sm font-bold",children:"2"}),"Difficulty Level"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:["Easy","Medium","Hard","Mixed"].map(s=>e.jsxs("label",{className:n("relative flex items-center justify-center p-4 rounded-2xl cursor-pointer transition-all duration-200 border-2",r.difficulty===s?"bg-cyan-500/10 border-cyan-500 shadow-[0_0_20px_-5px_rgba(6,182,212,0.5)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsx("input",{type:"radio",value:s,...u("difficulty"),className:"hidden"}),e.jsx("span",{className:n("font-bold",r.difficulty===s?"text-cyan-400":"text-slate-300"),children:s})]},s))}),a.difficulty&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.difficulty.message})]}),e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 text-emerald-400 flex items-center justify-center mr-3 text-sm font-bold",children:"3"}),"Topics"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(s=>{const t=d.includes(s.name);return e.jsxs("label",{className:n("group relative flex items-center p-4 rounded-2xl cursor-pointer transition-all duration-200 border-2 overflow-hidden",t?"bg-emerald-500/10 border-emerald-500 shadow-[0_0_20px_-5px_rgba(16,185,129,0.3)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsx("div",{className:n("absolute inset-0 opacity-0 transition-opacity duration-300",t?"opacity-100":"group-hover:opacity-10"),children:e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${s.gradient} opacity-5`})}),e.jsx("input",{type:"checkbox",value:s.name,...u("categories"),className:"hidden"}),e.jsx("div",{className:n("p-3 rounded-xl mr-4 transition-colors",t?"bg-emerald-500/20 text-emerald-400":"bg-white/5 text-slate-400 group-hover:text-white"),children:s.icon}),e.jsxs("div",{className:"flex-1 relative z-10",children:[e.jsx("p",{className:n("font-bold transition-colors",t?"text-white":"text-slate-300 group-hover:text-white"),children:s.name}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v?"Loading...":`${s.available} questions`})]}),t&&e.jsx(G,{className:"w-6 h-6 text-emerald-500 animate-in zoom-in duration-200"})]},s.name)})}),a.categories&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.categories.message})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-8 space-y-6",children:e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Summary"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-white/5",children:[e.jsx("span",{className:"text-slate-400",children:"Questions"}),e.jsx("span",{className:"font-bold text-white",children:r.numQuestions})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-white/5",children:[e.jsx("span",{className:"text-slate-400",children:"Difficulty"}),e.jsx("span",{className:"font-bold text-white",children:r.difficulty})]}),e.jsxs("div",{className:"py-3 border-b border-white/5",children:[e.jsx("span",{className:"text-slate-400 block mb-2",children:"Topics"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.length>0?d.map(s=>e.jsx("span",{className:"px-2 py-1 rounded-lg bg-white/5 text-xs text-slate-300 border border-white/5",children:s},s)):e.jsx("span",{className:"text-slate-600 text-sm italic",children:"None selected"})})]}),e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsxs("span",{className:"text-slate-400 flex items-center",children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," Est. Time"]}),e.jsxs("span",{className:"font-bold text-primary",children:[Math.round(S/60)," min ",S%60,"s"]})]})]}),x&&e.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-start",children:[e.jsx(D,{className:"w-5 h-5 text-red-400 mr-3 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-400",children:"Some selected categories do not have enough questions for the chosen amount."})]}),e.jsxs("button",{type:"submit",disabled:!b||x||c,className:n("w-full flex items-center justify-center px-8 py-4 text-base font-bold rounded-xl shadow-lg transition-all duration-300 transform hover:-translate-y-1",!b||x||c?"bg-slate-800 text-slate-500 cursor-not-allowed":"btn-vibeai"),children:[c?e.jsx(F,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(O,{className:"w-5 h-5 mr-2"}),c?"Generating...":"Start Quiz"]}),N&&e.jsxs("p",{className:"mt-4 text-sm text-red-400 flex items-center justify-center",children:[e.jsx(P,{className:"w-4 h-4 mr-2"})," ",N]})]})})})]})})]})}export{ie as QuizConfig};
