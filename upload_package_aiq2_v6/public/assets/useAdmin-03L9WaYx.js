import{r as i}from"./vendor-D8AvkUoV.js";import{a as o}from"./index-C57Ivx-l.js";function O(){const[l,a]=i.useState(!1),[u,s]=i.useState(null),p=async r=>{a(!0),s(null);try{const t={...r},e=await o.get("/admin/users.php",{params:t});return{users:e.data.users,total:e.data.total}}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},d=async r=>{a(!0),s(null);try{const t={...r};r?.startDate&&(t.startDate=r.startDate.toISOString()),r?.endDate&&(t.endDate=r.endDate.toISOString());const e=await o.get("/analytics/logs.php",{params:t});return{logs:e.data.logs,total:e.data.total}}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},f=async r=>{a(!0),s(null);try{const t=await o.get("/admin/user_activity.php",{params:{userId:r}});return{logins:t.data.logins,attempts:t.data.attempts,activity:t.data.activity}}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},y=async(r,t,e)=>{a(!0),s(null);try{await o.post("/admin/toggle_user.php",{userId:r,disabled:t,reason:e})}catch(n){const c=n instanceof Error?n.message:"An error occurred";throw s(c),n}finally{a(!1)}},g=async(r,t)=>{a(!0),s(null);try{await o.post("/admin/update_role.php",{user_id:r,role:t})}catch(e){const n=e instanceof Error?e.message:"An error occurred";throw s(n),e}finally{a(!1)}},h=i.useCallback(async r=>{a(!0),s(null);try{const t=await o.get("/questions/list.php",{params:{...r,_t:Date.now()}});return{questions:t.data.data,total:t.data.total}}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},[]);return{isLoading:l,error:u,fetchUsers:p,fetchUserActivity:f,fetchActivityLogs:d,toggleUserStatus:y,updateUserRole:g,fetchQuestions:h,createQuestion:async r=>{a(!0),s(null);try{return(await o.post("/questions/create.php",r)).data}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},updateQuestion:async(r,t)=>{a(!0),s(null);try{return(await o.post("/questions/update.php",{id:r,...t})).data.data}catch(e){const n=e instanceof Error?e.message:"An error occurred";throw s(n),e}finally{a(!1)}},deleteQuestion:async r=>{a(!0),s(null);try{await o.post("/questions/delete.php",{id:r})}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},generateQuestions:async r=>{a(!0),s(null);try{return(await o.post("/admin/generate_questions.php",r)).data}catch(t){const e=t.response?.data?.error||(t instanceof Error?t.message:"An error occurred");throw s(e),new Error(e)}finally{a(!1)}},fetchMedia:async r=>{a(!0),s(null);try{const t=await o.get("/media/list.php",{params:r});return{media:t.data.media,total:t.data.total}}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},uploadMedia:async(r,t,e)=>{a(!0),s(null);try{const n=new FormData;return n.append("file",r),n.append("type",t),e&&n.append("description",e),(await o.post("/media/upload.php",n,{headers:{"Content-Type":"multipart/form-data"}})).data.media}catch(n){const c=n instanceof Error?n.message:"An error occurred";throw s(c),n}finally{a(!1)}},deleteMedia:async r=>{a(!0),s(null);try{await o.post("/media/delete.php",{id:r})}catch(t){const e=t instanceof Error?t.message:"An error occurred";throw s(e),t}finally{a(!1)}},fetchAnalytics:async(r,t)=>{a(!0),s(null);try{const e={};return r&&(e.startDate=r.toISOString()),t&&(e.endDate=t.toISOString()),(await o.get("/admin/analytics.php",{params:e})).data}catch(e){const n=e instanceof Error?e.message:"An error occurred";throw s(n),e}finally{a(!1)}},fetchDailyStats:async()=>[],fetchCategoryStats:async()=>[],fetchRegistrationStats:async()=>[]}}export{O as u};
