import{u as j,j as e,c as N,a as v}from"./index-C57Ivx-l.js";import{r}from"./vendor-D8AvkUoV.js";import{u as w,a as y,o as k,s as i,_ as S,l as n}from"./schemas-BznUp_a-.js";import{j as m,f as F,N as P,O as B,B as E,Q as C,V as L,h as x}from"./ui-8QwkGQs4.js";const O=k({name:i().min(2,"Name must be at least 2 characters"),phone:i().optional().or(n("")),institution:i().optional().or(n("")),category:S(["student","professional","educator","hobbyist"]),bio:i().max(500,"Bio must be less than 500 characters").optional().or(n(""))});function U(){const{user:s,refreshProfile:u}=j(),[c,d]=r.useState(!1),[h,p]=r.useState(!0),{register:l,handleSubmit:b,setValue:a,formState:{errors:t}}=w({resolver:y(O),defaultValues:{category:"student"}});r.useEffect(()=>{s&&(a("name",s.name),a("phone",s.phone||""),a("institution",s.institution||""),a("category",s.category||"student"),a("bio",s.bio||""),p(!1))},[s,a]);const f=async o=>{if(s){d(!0);try{await v.post("/profile/update.php",{name:o.name,phone:o.phone||null,institution:o.institution||null,category:o.category,bio:o.bio||null}),await u(),x.success("Profile updated successfully")}catch(g){console.error("Error updating profile:",g),x.error("Failed to update profile")}finally{d(!1)}}};return h?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-primary-600"})}):e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Profile Settings"}),e.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm rounded-xl shadow-xl border border-white/10 overflow-hidden",children:e.jsx("div",{className:"p-6 sm:p-8",children:e.jsxs("form",{onSubmit:b(f),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-300 mb-1",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"h-5 w-5 text-slate-500"})}),e.jsx("input",{...l("name"),type:"text",className:N("block w-full pl-10 pr-3 py-2 bg-black/20 border rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-white placeholder-slate-500 transition-colors",t.name?"border-red-500/50":"border-white/10"),placeholder:"Your full name"})]}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:t.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-300 mb-1",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-slate-500"})}),e.jsx("input",{...l("phone"),type:"tel",className:"block w-full pl-10 pr-3 py-2 bg-black/20 border border-white/10 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-white placeholder-slate-500 transition-colors",placeholder:"+91 9876543210"})]}),t.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:t.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-slate-300 mb-1",children:"Institution / Organization"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-5 w-5 text-slate-500"})}),e.jsx("input",{...l("institution"),type:"text",className:"block w-full pl-10 pr-3 py-2 bg-black/20 border border-white/10 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-white placeholder-slate-500 transition-colors",placeholder:"University or Company name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-300 mb-1",children:"Category"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-slate-500"})}),e.jsxs("select",{...l("category"),className:"block w-full pl-10 pr-3 py-2 bg-black/20 border border-white/10 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-white transition-colors appearance-none",children:[e.jsx("option",{value:"student",className:"bg-slate-900",children:"Student"}),e.jsx("option",{value:"professional",className:"bg-slate-900",children:"Professional"}),e.jsx("option",{value:"educator",className:"bg-slate-900",children:"Educator"}),e.jsx("option",{value:"hobbyist",className:"bg-slate-900",children:"Hobbyist"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-slate-300 mb-1",children:"Bio"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:e.jsx(C,{className:"h-5 w-5 text-slate-500"})}),e.jsx("textarea",{...l("bio"),rows:4,className:"block w-full pl-10 pr-3 py-2 bg-black/20 border border-white/10 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-white placeholder-slate-500 transition-colors resize-none",placeholder:"Tell us a bit about yourself..."})]}),t.bio&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:t.bio.message})]}),e.jsx("div",{className:"pt-4 border-t border-white/10 flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-lg shadow-indigo-500/20 text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:c?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-5 h-5 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})})]})})})]})}export{U as Profile};
