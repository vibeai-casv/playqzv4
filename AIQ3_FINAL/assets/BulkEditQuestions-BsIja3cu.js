import{f as m,j as e}from"./index-hyavAUaS.js";import{r as n}from"./vendor-D8AvkUoV.js";import{ai as C,k as E,X as T,Y as S,ap as Q}from"./ui-BGIIMZpa.js";function P(){const[i,f]=n.useState([]),[b,c]=n.useState([]),[l,d]=n.useState(""),[h,x]=n.useState(!1),[y,u]=n.useState(null),[r,o]=n.useState({});n.useEffect(()=>{j()},[]),n.useEffect(()=>{l&&p()},[l]);const j=async()=>{try{const s=await m("/questions/types.php");if(s.types&&s.types.length>0)c(s.types),d(s.types[0]);else{const t=["text_mcq","image_identify_logo","image_identify_person","true_false","short_answer"];c(t),d(t[0]),console.warn("No question types from database, using fallback types")}}catch(s){console.error("Failed to load question types",s);const t=["text_mcq","image_identify_logo","image_identify_person","true_false","short_answer"];c(t),d(t[0])}},p=async()=>{x(!0);try{const s=await m(`/questions/list.php?type=${l}&limit=1000`);f(s.data||[])}catch(s){console.error("Failed to load questions",s)}finally{x(!1)}},v=s=>{u(s.id),o({question_text:s.question_text,options:s.options,correct_answer:s.correct_answer,explanation:s.explanation,category:s.category,difficulty:s.difficulty,points:s.points})},N=()=>{u(null),o({})},_=async s=>{try{await m(`/questions/update.php?id=${s}`,{method:"PUT",body:JSON.stringify(r)}),alert("Question updated successfully!"),u(null),o({}),p()}catch(t){alert(t.message||"Failed to update question")}},w=s=>({text_mcq:"Multiple Choice",image_identify_logo:"Logo Identification",image_identify_person:"Personality Identification",true_false:"True/False",short_answer:"Short Answer"})[s]||s;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bulk Edit Questions"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Edit multiple questions filtered by type"})]})}),e.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Question Type"}),e.jsx("select",{value:l,onChange:s=>d(s.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:b.map(s=>e.jsx("option",{value:s,children:w(s)},s))})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.length," question",i.length!==1?"s":""," found"]})]})}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-primary"})}):i.length===0?e.jsx("div",{className:"text-center py-12 bg-card border border-border rounded-xl",children:e.jsx("p",{className:"text-muted-foreground",children:"No questions found for this type"})}):e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:border-primary/50 transition-colors",children:y===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Question Text"}),e.jsx("textarea",{value:r.question_text||"",onChange:t=>o({...r,question_text:t.target.value}),rows:3,className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(s.question_type==="text_mcq"||s.question_type==="image_identify_logo"||s.question_type==="image_identify_person")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Options"}),r.options?.map((t,a)=>e.jsx("input",{type:"text",value:t,onChange:k=>{const g=[...r.options||[]];g[a]=k.target.value,o({...r,options:g})},className:"w-full px-4 py-2 mb-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`Option ${a+1}`},a))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Correct Answer"}),e.jsx("input",{type:"text",value:r.correct_answer||"",onChange:t=>o({...r,correct_answer:t.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Points"}),e.jsx("input",{type:"number",value:r.points||10,onChange:t=>o({...r,points:parseInt(t.target.value)}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),e.jsx("input",{type:"text",value:r.category||"",onChange:t=>o({...r,category:t.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty"}),e.jsxs("select",{value:r.difficulty||"medium",onChange:t=>o({...r,difficulty:t.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Explanation"}),e.jsx("textarea",{value:r.explanation||"",onChange:t=>o({...r,explanation:t.target.value}),rows:2,className:"w-full px-4 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs("button",{onClick:N,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted/50 transition-colors flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Cancel"]}),e.jsxs("button",{onClick:()=>_(s.id),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Save Changes"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:s.question_text}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded",children:s.category}),e.jsx("span",{className:"capitalize",children:s.difficulty}),e.jsxs("span",{children:[s.points," points"]}),e.jsx("span",{className:s.is_active?"text-green-500":"text-yellow-500",children:s.is_active?"Active":"Inactive"})]})]}),e.jsxs("button",{onClick:()=>v(s),className:"px-3 py-1.5 border border-border rounded-lg hover:bg-muted/50 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Q,{className:"w-4 h-4"}),"Edit"]})]}),s.options&&s.options.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Options:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.options.map((t,a)=>e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm ${t===s.correct_answer?"bg-green-500/10 text-green-500 border border-green-500/30":"bg-muted/50 text-muted-foreground"}`,children:t},a))})]}),s.explanation&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:s.explanation})]})},s.id))})]})}export{P as BulkEditQuestions};
