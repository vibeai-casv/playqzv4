import{j as e,S as f,c as z}from"./index-Bzm1UCB5.js";import{r as s}from"./vendor-D8AvkUoV.js";import{u as F}from"./useAdmin-Dr9VpOpy.js";import{v as T,U as j,A as y,F as P,r as _,a1 as $,a2 as Q}from"./ui-BHrEg2Uj.js";import{R as l,L as B,C as g,X as p,Y as u,T as o,d as E,B as v,b as w,P as W,e as q,c as O}from"./charts-SrP5XYck.js";const N=["#00d4ff","#10b981","#f59e0b","#ec4899","#8b5cf6","#06b6d4"];function H(){const{fetchAnalytics:c,fetchDailyStats:n,fetchCategoryStats:x,fetchRegistrationStats:h}=F(),[m,r]=s.useState(!0),[b,S]=s.useState(null),[k,C]=s.useState([]),[i,L]=s.useState([]),[D,A]=s.useState([]);return s.useEffect(()=>{(async()=>{r(!0);try{const[a,R,U,K]=await Promise.all([c(),n(),x(),h()]);S(a),C(R||[]),L(U||[]),A(K||[])}catch(a){console.error("Failed to load dashboard data",a)}finally{r(!1)}})()},[]),m?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsx(f,{className:"h-32 rounded-2xl bg-slate-800"},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(f,{className:"h-80 rounded-2xl bg-slate-800"}),e.jsx(f,{className:"h-80 rounded-2xl bg-slate-800"})]})]}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-300 mt-1",children:"System overview and analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-300 bg-slate-900/50 px-4 py-2 rounded-lg border border-white/5",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Last 30 Days"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Total Users",value:b?.totalUsers||0,icon:j,trend:"+12%",trendUp:!0,gradient:"from-primary to-cyan-400"}),e.jsx(d,{title:"Active Users",value:b?.activeUsers||0,icon:y,trend:"+5%",trendUp:!0,gradient:"from-emerald-500 to-teal-500"}),e.jsx(d,{title:"Total Questions",value:i.reduce((t,a)=>t+(a.total_questions||0),0),icon:P,trend:"+8%",trendUp:!0,gradient:"from-cyan-500 to-blue-500"}),e.jsx(d,{title:"Total Attempts",value:b?.totalAttempts||0,icon:_,trend:"+24%",trendUp:!0,gradient:"from-orange-500 to-amber-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm p-6 rounded-3xl shadow-sm border border-white/5",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-primary"})," User Registration Trend"]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(B,{data:D,children:[e.jsx(g,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),e.jsx(p,{dataKey:"date",tick:{fill:"#94a3b8",fontSize:12},tickFormatter:t=>new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric"}),axisLine:!1,tickLine:!1,dy:10}),e.jsx(u,{tick:{fill:"#94a3b8",fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(o,{contentStyle:{backgroundColor:"#1e293b",borderColor:"rgba(255,255,255,0.1)",borderRadius:"12px",color:"#fff",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.5)"},itemStyle:{color:"#fff"}}),e.jsx(E,{type:"monotone",dataKey:"count",stroke:"#00d4ff",strokeWidth:3,dot:{fill:"#00d4ff",strokeWidth:2,r:4,stroke:"#1e293b"},activeDot:{r:6,strokeWidth:0}})]})})})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm p-6 rounded-3xl shadow-sm border border-white/5",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-purple-400"})," Quiz Attempts (Daily)"]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(v,{data:k,children:[e.jsx(g,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),e.jsx(p,{dataKey:"date",tick:{fill:"#94a3b8",fontSize:12},tickFormatter:t=>new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric"}),axisLine:!1,tickLine:!1,dy:10}),e.jsx(u,{tick:{fill:"#94a3b8",fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(o,{contentStyle:{backgroundColor:"#1e293b",borderColor:"rgba(255,255,255,0.1)",borderRadius:"12px",color:"#fff",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.5)"},cursor:{fill:"rgba(255,255,255,0.05)"},itemStyle:{color:"#fff"}}),e.jsx(w,{dataKey:"total_attempts",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm p-6 rounded-3xl shadow-sm border border-white/5",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-emerald-400"})," Questions by Category"]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(W,{children:[e.jsx(q,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:a})=>`${t} ${((a||0)*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"total_questions",nameKey:"category",children:i.map((t,a)=>e.jsx(O,{fill:N[a%N.length],stroke:"rgba(0,0,0,0.2)"},`cell-${a}`))}),e.jsx(o,{contentStyle:{backgroundColor:"#1e293b",borderColor:"rgba(255,255,255,0.1)",borderRadius:"12px",color:"#fff",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.5)"},itemStyle:{color:"#fff"}})]})})})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm p-6 rounded-3xl shadow-sm border border-white/5",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-orange-400"})," Accuracy by Category"]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(v,{data:i,layout:"vertical",children:[e.jsx(g,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),e.jsx(p,{type:"number",domain:[0,100],tick:{fill:"#94a3b8",fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(u,{dataKey:"category",type:"category",width:120,tick:{fill:"#94a3b8",fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(o,{contentStyle:{backgroundColor:"#1e293b",borderColor:"rgba(255,255,255,0.1)",borderRadius:"12px",color:"#fff",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.5)"},cursor:{fill:"rgba(255,255,255,0.05)"},formatter:t=>[`${t.toFixed(1)}%`,"Accuracy"],itemStyle:{color:"#fff"}}),e.jsx(w,{dataKey:"accuracy_rate",fill:"#10b981",radius:[0,4,4,0]})]})})})]})]})]})}function d({title:c,value:n,icon:x,trend:h,trendUp:m,gradient:r}){return e.jsxs("div",{className:"relative group overflow-hidden rounded-2xl bg-slate-900/50 border border-white/5 p-6 hover:border-white/10 transition-all duration-300",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r} opacity-5 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300",children:c}),e.jsx("h3",{className:"text-3xl font-bold text-white mt-2 tracking-tight",children:n})]}),e.jsx("div",{className:"p-3 bg-white/5 rounded-xl border border-white/5 group-hover:scale-110 transition-transform duration-300",children:e.jsx(x,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"relative mt-4 flex items-center text-sm",children:[e.jsx("span",{className:z("font-bold",m?"text-emerald-400":"text-red-400"),children:h}),e.jsx("span",{className:"text-slate-400 ml-2",children:"vs last month"})]})]})}export{H as AdminDashboard};
