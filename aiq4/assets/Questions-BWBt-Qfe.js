import{j as e,c as O,g as X,b as ae,a as _e,f as Se}from"./index-BPaRoEq1.js";import{r as a}from"./vendor-D8AvkUoV.js";import{u as V}from"./useAdmin-DJe3kQr0.js";import{M as $}from"./Modal-BCESYtY0.js";import{a5 as se,k as G,a9 as ie,aa as W,i as c,I as Ce,X as le,ab as oe,_ as Ie,ac as J,G as Ae,ad as Fe,ae as Qe,af as Oe,o as ne,ag as qe,w as te,z as de,R as De,ah as re,ai as Pe,B as Ee,D as Me,a8 as E,aj as Te,ak as Be,O as Le,u as Ge}from"./ui-BHrEg2Uj.js";import{o as ce,s as D,c as ze,_ as L,n as ge,u as xe,a as ue,d as Re}from"./schemas-BznUp_a-.js";import{Z as Ue}from"./compat-DOTGHHbm.js";import{B as $e}from"./BundleImporter-TJaqp2El.js";const Je=ce({question_text:D().min(3,"Question text must be at least 3 characters"),question_type:L(["text_mcq","image_identify_logo","image_identify_person","personality","true_false","short_answer"]),category:D().min(1,"Category is required"),difficulty:L(["easy","medium","hard"]),points:ge().min(1,"Points must be at least 1"),status:L(["active","inactive","draft"]),options:ze(D()).default([]),correct_answer:D().min(1,"Correct answer is required"),explanation:D().optional(),image_url:D().optional().refine(r=>!r||r===""||r.startsWith("/")||r.startsWith("http://")||r.startsWith("https://"),"Image URL must be a valid URL or path starting with /")}).superRefine((r,N)=>{r.status==="active"&&(r.question_type==="image_identify_logo"||r.question_type==="image_identify_person"||r.question_type==="personality")&&(r.image_url||N.addIssue({code:Ue.custom,message:"Image is required for active image identification questions",path:["image_url"]}))}),We=ce({topic:D().min(3,"Topic is required"),count:ge().min(1).max(50),difficulty:L(["easy","medium","hard"]),type:L(["text_mcq","image_identify_logo","image_identify_person","personality","true_false","short_answer"])});function Ve({onSelect:r,onCancel:N,defaultType:y="all"}){const{fetchMedia:C,uploadMedia:f,deleteMedia:p,isLoading:v}=V(),[h,i]=a.useState([]),[b,k]=a.useState(!1),[S,q]=a.useState(""),[d,x]=a.useState(y),l=async()=>{try{const{media:o}=await C({type:d==="all"?void 0:d});i(o)}catch(o){console.error(o),c.error("Failed to load media")}};a.useEffect(()=>{l()},[d]);const F=async o=>{const I=o.target.files?.[0];if(I){k(!0);try{let j;d!=="all"?j=d:y!=="all"?j=y:j="logo";const Q=await f(I,j);c.success("File uploaded successfully"),await l(),r(Q.url,Q.original_filename)}catch(j){console.error(j);const Q=j;c.error(`Failed to upload file: ${Q.message||"Unknown error"}`)}finally{k(!1)}}},w=async(o,I)=>{if(o.stopPropagation(),!!confirm("Are you sure you want to delete this image?"))try{await p(I),c.success("Image deleted successfully"),l()}catch(j){console.error(j),c.error("Failed to delete image")}},s=h.filter(o=>o.filename.toLowerCase().includes(S.toLowerCase()));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search media...",value:S,onChange:o=>q(o.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("select",{value:d,onChange:o=>x(o.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"logo",children:"Logos"}),e.jsx("option",{value:"personality",children:"Personalities"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"modal-file-upload",className:"hidden",accept:"image/*",onChange:F,disabled:b}),e.jsxs("label",{htmlFor:"modal-file-upload",className:O("flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 cursor-pointer",b&&"opacity-50 cursor-not-allowed"),children:[b?e.jsx(G,{className:"w-4 h-4 animate-spin"}):e.jsx(ie,{className:"w-4 h-4"}),"Upload"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-h-[400px] overflow-y-auto p-1",children:v?e.jsx("div",{className:"col-span-full flex justify-center py-8",children:e.jsx(G,{className:"w-8 h-8 animate-spin text-indigo-600"})}):s.length===0?e.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No media found"}):s.map(o=>e.jsxs("div",{className:"group relative aspect-square bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden border hover:border-indigo-500 cursor-pointer",onClick:()=>r(o.url,o.original_filename),children:[e.jsx("img",{src:X(o.url),alt:o.filename,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-white font-medium bg-indigo-600 px-3 py-1 rounded-full text-sm",children:"Select"}),e.jsx("button",{onClick:I=>w(I,o.id),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",title:"Delete image",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 p-2 text-xs text-white truncate",children:o.original_filename||o.filename})]},o.id))}),e.jsx("div",{className:"flex justify-end pt-4 border-t dark:border-gray-700",children:e.jsx("button",{onClick:N,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300",children:"Cancel"})})]})}function He({question:r,onSave:N,onCancel:y}){const{createQuestion:C,updateQuestion:f,fetchMetadata:p,fetchMedia:v,isLoading:h}=V(),[i,b]=a.useState(!1),[k,S]=a.useState(""),[q,d]=a.useState([]),[x,l]=a.useState(["easy","medium","hard"]),[F,w]=a.useState(["text_mcq","image_identify_logo","image_identify_person","personality","true_false","short_answer"]);a.useEffect(()=>{(async()=>{const n=await p();n&&(n.categories&&n.categories.length>0&&d(n.categories),n.difficulties&&n.difficulties.length>0&&l(n.difficulties),n.types&&n.types.length>0&&w(n.types))})()},[]),a.useEffect(()=>{r&&(async()=>{if(r?.image_url)try{const{media:n}=await v(),M=n.find(_=>r.image_url?.includes(_.filename)||r.image_url?.includes(_.original_filename));M&&S(M.original_filename)}catch(n){console.error("Failed to load media info:",n)}})()},[r,v]);const s=xe({resolver:ue(Je),defaultValues:{question_text:"",question_type:"text_mcq",category:"General",difficulty:"medium",points:10,status:"draft",options:["","","",""],correct_answer:"",explanation:"",image_url:""}}),{fields:o,append:I,remove:j}=Re({control:s.control,name:"options"});a.useEffect(()=>{r&&s.reset({question_text:r.question_text,question_type:r.question_type,category:r.category,difficulty:r.difficulty,points:r.points,status:r.status,options:r.options||[],correct_answer:r.correct_answer,explanation:r.explanation||"",image_url:r.image_url||""})},[r,s]);const Q=async g=>{try{r?(await f(r.id,g),c.success("Question updated successfully")):(await C(g),c.success("Question created successfully")),N()}catch(n){console.error(n),c.error("Failed to save question")}},m=s.watch("question_type");return e.jsxs("form",{onSubmit:s.handleSubmit(Q),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Question Type"}),e.jsx("select",{...s.register("question_type"),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:F.map(g=>e.jsx("option",{value:g,children:{text_mcq:"Multiple Choice",image_identify_logo:"Logo Identification",image_identify_person:"Person Identification",personality:"Personality Identification",true_false:"True/False",short_answer:"Short Answer"}[g]||g.replace(/_/g," ")},g))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...s.register("category"),list:"categories-list",className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Select or type new category"}),e.jsx("datalist",{id:"categories-list",children:q.map((g,n)=>e.jsx("option",{value:g},n))})]}),s.formState.errors.category&&e.jsx("p",{className:"text-xs text-red-500",children:s.formState.errors.category.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Difficulty"}),e.jsx("select",{...s.register("difficulty"),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:x.map(g=>e.jsx("option",{value:g,className:"capitalize",children:g},g))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points"}),e.jsx("input",{type:"number",...s.register("points",{valueAsNumber:!0}),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{...s.register("status"),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Question Text"}),e.jsx("textarea",{...s.register("question_text"),rows:3,className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter the question here..."}),s.formState.errors.question_text&&e.jsx("p",{className:"text-xs text-red-500",children:s.formState.errors.question_text.message})]}),(m==="image_identify_logo"||m==="image_identify_person"||m==="personality")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image"}),e.jsx("div",{className:"flex gap-4 items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{...s.register("image_url"),className:"flex-1 p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://... or select from library"}),e.jsx("button",{type:"button",onClick:()=>b(!0),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300",children:e.jsx(Ce,{className:"w-4 h-4"})})]}),s.watch("image_url")&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"relative w-fit group",children:[e.jsx("img",{src:X(s.watch("image_url"))||"",alt:"Preview",className:"h-32 object-contain rounded border bg-gray-50 dark:bg-gray-800"}),e.jsx("button",{type:"button",onClick:()=>s.setValue("image_url",""),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(le,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all",children:k||s.watch("image_url")?.split("/").pop()||"Unknown"})]})]})})]}),e.jsx($,{open:i,onClose:()=>b(!1),title:"Select Media",className:"max-w-3xl",children:e.jsx(Ve,{defaultType:m==="image_identify_logo"?"logo":m==="image_identify_person"||m==="personality"?"personality":"all",onSelect:(g,n)=>{s.setValue("image_url",g),S(n||""),b(!1)},onCancel:()=>b(!1)})}),(m==="text_mcq"||m==="image_identify_logo"||m==="image_identify_person"||m==="personality")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>I(""),className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[e.jsx(oe,{className:"w-4 h-4"})," Add Option"]})]}),e.jsx("div",{className:"space-y-2",children:o.map((g,n)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{...s.register(`options.${n}`),className:"flex-1 p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:`Option ${n+1}`}),e.jsx("button",{type:"button",onClick:()=>j(n),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:e.jsx(W,{className:"w-4 h-4"})})]},g.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Correct Answer"}),m==="true_false"?e.jsxs("select",{...s.register("correct_answer"),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Answer"}),e.jsx("option",{value:"True",children:"True"}),e.jsx("option",{value:"False",children:"False"})]}):m==="text_mcq"||m==="image_identify_logo"||m==="image_identify_person"||m==="personality"?e.jsxs("select",{...s.register("correct_answer"),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Correct Option"}),s.watch("options")?.map((g,n)=>g&&e.jsx("option",{value:g,children:g},n))]}):e.jsx("input",{...s.register("correct_answer"),className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter correct answer"}),s.formState.errors.correct_answer&&e.jsx("p",{className:"text-xs text-red-500",children:s.formState.errors.correct_answer.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Explanation (Optional)"}),e.jsx("textarea",{...s.register("explanation"),rows:2,className:"w-full p-2 border rounded-lg text-gray-900 bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Explain why this is the correct answer..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[h?e.jsx(G,{className:"w-4 h-4 animate-spin"}):e.jsx(Ie,{className:"w-4 h-4"}),"Save Question"]})]})]})}function Ze({isOpen:r,onClose:N,onSuccess:y}){const{generateQuestions:C,isLoading:f}=V(),p=xe({resolver:ue(We),defaultValues:{topic:"",count:5,difficulty:"medium",type:"text_mcq"}}),v=async h=>{try{const i=await C(h);if(i.success)c.success(`Successfully generated ${i.count} questions!`,{description:"They have been added to your bank as drafts.",icon:e.jsx(ne,{className:"w-5 h-5 text-green-500"})}),y(),N();else throw new Error(i.error||"Failed to generate questions")}catch(i){console.error(i),c.error(i.message||"Generation failed. Please check your API key and try again.")}};return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-gray-950 w-full max-w-2xl rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-800 overflow-hidden animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"relative p-6 border-b border-gray-100 dark:border-gray-800 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-950/20 dark:to-indigo-950/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-purple-600 rounded-xl shadow-lg shadow-purple-500/30",children:e.jsx(J,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"AI Question Generator"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Powered by Gemini 1.5 Flash"})]})]}),e.jsx("button",{onClick:N,className:"absolute top-6 right-6 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-white/50 dark:hover:bg-gray-800 rounded-full transition-all",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:p.handleSubmit(v),className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-500"}),"What is the main topic?"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...p.register("topic"),className:O("w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",p.formState.errors.topic&&"border-red-500 focus:ring-red-500"),placeholder:"e.g. Quantum Physics, React Hooks, Great Wall of China..."}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 text-xs text-gray-400 font-medium",children:[e.jsx(Fe,{className:"w-3 h-3"}),"Be specific"]})]}),p.formState.errors.topic&&e.jsx("p",{className:"text-xs font-medium text-red-500 pl-1 animate-in slide-in-from-top-1",children:p.formState.errors.topic.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[e.jsx(Qe,{className:"w-4 h-4 text-blue-500"}),"Question Type"]}),e.jsxs("select",{...p.register("type"),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all appearance-none cursor-pointer",children:[e.jsx("option",{value:"text_mcq",children:"Text-based MCQ"}),e.jsx("option",{value:"image_identify_logo",children:"Logo Identification"}),e.jsx("option",{value:"personality",children:"Personality ID"}),e.jsx("option",{value:"true_false",children:"True / False"}),e.jsx("option",{value:"short_answer",children:"Short Answer"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[e.jsx(Oe,{className:"w-4 h-4 text-red-500"}),"Difficulty Level"]}),e.jsx("div",{className:"flex p-1 bg-gray-100 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800",children:["easy","medium","hard"].map(h=>e.jsx("button",{type:"button",onClick:()=>p.setValue("difficulty",h),className:O("flex-1 py-1.5 px-3 text-xs font-bold rounded-lg capitalize transition-all",p.watch("difficulty")===h?"bg-white dark:bg-gray-800 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:h},h))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"How many questions?"}),e.jsx("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:p.watch("count")})]}),e.jsx("input",{type:"range",...p.register("count",{valueAsNumber:!0}),min:1,max:20,className:"w-full h-2 bg-gray-200 dark:bg-gray-800 rounded-lg appearance-none cursor-pointer accent-purple-600"}),e.jsxs("div",{className:"flex justify-between text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:[e.jsx("span",{children:"1 Question"}),e.jsx("span",{children:"20 Questions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 italic",children:[e.jsx(J,{className:"w-3 h-3 text-yellow-500 animate-pulse"}),"Note: Questions will be saved as drafts for your review."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:N,className:"px-6 py-2.5 text-sm font-bold text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"relative flex items-center justify-center gap-2 px-8 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl shadow-lg shadow-purple-500/25 font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed group overflow-hidden",children:f?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-5 h-5 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-white/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),e.jsx(J,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:"Create Questions"})]})})]})]})]})]})}):null}function Xe({onImportComplete:r,onCancel:N}){const[y,C]=a.useState(null),[f,p]=a.useState(!0),[v,h]=a.useState(!1),[i,b]=a.useState(null),k=d=>{const x=d.target.files?.[0];if(x){if(x.type!=="application/json"){c.error("Please select a JSON file");return}C(x),b(null)}},S=async()=>{if(!y){c.error("Please select a file");return}h(!0),b(null);try{let x=(await y.text()).trim();x.startsWith("```")&&(x=x.replace(/^```(?:json)?/,"").replace(/```$/,"").trim());let l;try{l=JSON.parse(x)}catch{const o=x.replace(/[\u200B-\u200D\uFEFF]/g,"");l=JSON.parse(o)}let F=[];if(Array.isArray(l))F=l;else if(l&&typeof l=="object"&&Array.isArray(l.questions))F=l.questions;else{c.error('JSON must be an array of questions or an object with a "questions" array'),h(!1);return}const w=await ae.post("/questions/import.php",{questions:F,skipDuplicates:f});b(w.data),w.data.imported>0?(c.success(`Successfully imported ${w.data.imported} questions!`),w.data.skipped>0&&c.info(`Skipped ${w.data.skipped} duplicate questions`)):c.warning("No questions were imported"),w.data.errors.length>0&&console.error("Import errors:",w.data.errors)}catch(d){console.error("Import error:",d);let x="Failed to import questions";if(_e.isAxiosError(d))if(d.response){const l=d.response.data;l.error&&(x=l.error),(l.imported>0||l.skipped>0)&&(b({imported:l.imported||0,skipped:l.skipped||0,errors:l.errors||[],total_processed:l.total_processed||0}),l.imported>0&&c.success(`Partially imported ${l.imported} questions`)),console.error("Server error:",l)}else d.request?(x="No response from server. Check your connection.",console.error("No response:",d.request)):x=d.message;else d instanceof Error&&(x=d.message);c.error(x)}finally{h(!1)}},q=()=>{i&&i.imported>0?r():N()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[e.jsx(qe,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Choose a JSON file"}),e.jsx("input",{type:"file",accept:".json",onChange:k,className:"hidden"})]}),y&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",y.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"skipDuplicates",checked:f,onChange:d=>p(d.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"skipDuplicates",className:"text-sm text-gray-700 dark:text-gray-300",children:"Skip duplicate questions (based on question text)"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Expected JSON Format"]}),e.jsx("pre",{className:"text-xs bg-white dark:bg-gray-800 p-3 rounded overflow-x-auto",children:`[
  {
    "type": "text_mcq",
    "category": "Fundamentals",
    "difficulty": "easy",
    "question": "What is AI?",
    "options": ["Option 1", "Option 2", "Option 3", "Option 4"],
    "correct_answer": "Option 1",
    "image_url": "optional",
    "explanation": "optional"
  }
]`})]})]}),i&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Imported: ",i.imported," questions"]})]}),i.skipped>0&&e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Skipped: ",i.skipped," duplicates"]})]}),i.errors.length>0&&e.jsxs("div",{className:"flex items-start gap-2 text-red-600 dark:text-red-400",children:[e.jsx(de,{className:"w-5 h-5 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium block mb-1",children:["Errors: ",i.errors.length]}),e.jsx("div",{className:"text-sm space-y-1 max-h-40 overflow-y-auto",children:i.errors.map((d,x)=>e.jsxs("div",{className:"text-xs",children:["â€¢ ",d]},x))})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 pt-2 border-t border-gray-200 dark:border-gray-600",children:["Total processed: ",i.total_processed]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:i&&i.imported>0?"Close":"Cancel"}),e.jsxs("button",{onClick:S,disabled:!y||v,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{className:"w-4 h-4"}),v?"Importing...":"Import Questions"]})]})]})}function lt(){const{fetchQuestions:r,deleteQuestion:N,updateQuestion:y,isLoading:C}=V(),[f,p]=a.useState([]),[v,h]=a.useState(0),[i,b]=a.useState(1),[k]=a.useState(50),[S,q]=a.useState(""),[d,x]=a.useState(""),[l,F]=a.useState(""),[w,s]=a.useState(""),[o,I]=a.useState(""),[j,Q]=a.useState(void 0),[m,g]=a.useState("created_at"),[n,M]=a.useState("desc"),[_,z]=a.useState(new Set),[me,T]=a.useState(!1),[pe,K]=a.useState(!1),[he,R]=a.useState(!1),[ye,U]=a.useState(!1),[Y,ee]=a.useState(void 0),[fe,be]=a.useState([]),A=a.useCallback(async()=>{try{const t=(i-1)*k,{questions:u,total:Z}=await r({search:S,category:d||void 0,difficulty:l||void 0,type:w||void 0,status:o||void 0,ai_generated:j,limit:k,offset:t,sortBy:m,sortOrder:n});p(u),h(Z)}catch(t){console.error(t),c.error("Failed to load questions")}},[i,k,S,d,l,w,o,j,m,n,r]);a.useEffect(()=>{(async()=>{try{const u=await Se("/questions/categories.php");u.success&&be(u.categories)}catch(u){console.error("Failed to fetch categories:",u)}})()},[]),a.useEffect(()=>{const t=setTimeout(()=>{A()},300);return()=>clearTimeout(t)},[A]);const P=t=>{m===t?M(n==="asc"?"desc":"asc"):(g(t),M("asc"))},je=async t=>{if(confirm("Are you sure you want to delete this question?"))try{await N(t),c.success("Question deleted"),A()}catch(u){console.error(u),c.error("Failed to delete question")}},we=async t=>{try{await y(t.id,{is_demo:!t.is_demo}),c.success(`Question ${t.is_demo?"removed from":"added to"} Demo`),A()}catch(u){console.error(u),c.error("Failed to update question")}},Ne=async()=>{if(_.size!==0)try{const t=c.loading("Creating export bundle..."),u=await ae.post("/bundle/export.php",{question_ids:Array.from(_)},{responseType:"blob"}),Z=window.URL.createObjectURL(new Blob([u.data])),B=document.createElement("a");B.href=Z,B.setAttribute("download",`question_bundle_${new Date().toISOString().slice(0,10)}.zip`),document.body.appendChild(B),B.click(),B.remove(),c.dismiss(t),c.success("Bundle downloaded successfully")}catch(t){console.error("Export error:",t),c.error("Failed to export bundle")}},H=async t=>{if(_.size!==0&&!(t==="delete"&&!confirm(`Delete ${_.size} questions?`)))try{await Promise.all(Array.from(_).map(u=>t==="delete"?N(u):y(u,{status:t==="activate"?"active":"inactive"}))),c.success("Bulk action completed"),z(new Set),A()}catch(u){console.error(u),c.error("Failed to perform bulk action")}},ve=t=>{const u=new Set(_);u.has(t)?u.delete(t):u.add(t),z(u)},ke=()=>{_.size===f.length?z(new Set):z(new Set(f.map(t=>t.id)))};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Question Bank"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",title:"Refresh List",children:e.jsx(De,{className:`w-4 h-4 ${C?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(re,{className:"w-4 h-4"})," Import JSON"]}),e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Pe,{className:"w-4 h-4"})," Import Bundle"]}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(J,{className:"w-4 h-4"})," AI Generate"]}),e.jsxs("button",{onClick:()=>{ee(void 0),T(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[e.jsx(oe,{className:"w-4 h-4"})," Add Question"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search questions...",value:S,onChange:t=>q(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-gray-900 bg-white border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"})]}),e.jsxs("select",{value:d,onChange:t=>x(t.target.value),className:"w-full px-4 py-2 border rounded-lg text-gray-900 bg-white border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"All Topics"}),fe.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:w,onChange:t=>s(t.target.value),className:"w-full px-4 py-2 border rounded-lg text-gray-900 bg-white border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"text_mcq",children:"Multiple Choice"}),e.jsx("option",{value:"image_identify_logo",children:"Logo Identification"}),e.jsx("option",{value:"image_identify_person",children:"Person Identification"}),e.jsx("option",{value:"personality",children:"Personality Identification"}),e.jsx("option",{value:"true_false",children:"True/False"}),e.jsx("option",{value:"short_answer",children:"Short Answer"})]}),e.jsxs("select",{value:l,onChange:t=>F(t.target.value),className:"w-full px-4 py-2 border rounded-lg text-gray-900 bg-white border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"All Difficulties"}),e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]}),e.jsxs("select",{value:o,onChange:t=>I(t.target.value),className:"w-full px-4 py-2 border rounded-lg text-gray-900 bg-white border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"draft",children:"Draft"})]}),e.jsxs("select",{value:j===void 0?"":j.toString(),onChange:t=>Q(t.target.value===""?void 0:t.target.value==="true"),className:"w-full px-4 py-2 border rounded-lg text-gray-900 bg-white border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"true",children:"AI Generated"}),e.jsx("option",{value:"false",children:"Manual"})]})]})}),_.size>0&&e.jsxs("div",{className:"flex gap-2 pt-2 border-t dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>H("activate"),className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 text-green-700 rounded hover:bg-green-200 text-sm",children:[e.jsx(Ee,{className:"w-4 h-4"})," Activate Selected"]}),e.jsxs("button",{onClick:()=>H("deactivate"),className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200 text-sm",children:[e.jsx(de,{className:"w-4 h-4"})," Deactivate Selected"]}),e.jsxs("button",{onClick:()=>H("delete"),className:"flex items-center gap-2 px-3 py-1.5 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:[e.jsx(W,{className:"w-4 h-4"})," Delete Selected"]}),e.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:[e.jsx(Me,{className:"w-4 h-4"})," Export Bundle"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-4",children:e.jsx("input",{type:"checkbox",checked:_.size===f.length&&f.length>0,onChange:ke,className:"rounded border-gray-300"})}),e.jsx("th",{className:"p-4 w-10"})," ",e.jsx("th",{className:"p-4 w-20 min-w-[5rem]",children:"Image"})," ",e.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("question_text"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Question ",e.jsx(E,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"p-4 w-10 text-center",children:"Demo"}),e.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("question_type"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Type ",e.jsx(E,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("category"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Category ",e.jsx(E,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("difficulty"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Difficulty ",e.jsx(E,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("points"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Pts ",e.jsx(E,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("status"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Status ",e.jsx(E,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center",children:e.jsx(G,{className:"w-8 h-8 animate-spin mx-auto text-indigo-600"})})}):f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No questions found"})}):f.map(t=>e.jsxs("tr",{className:O("hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",t.status==="inactive"&&"opacity-60 bg-gray-50/50 dark:bg-gray-800/50 grayscale-[0.5]"),children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",checked:_.has(t.id),onChange:()=>ve(t.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"p-4 w-20 min-w-[5rem]",children:t.image_url?e.jsx("div",{className:"w-16 h-16 rounded border border-gray-200 dark:border-gray-700 bg-white overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:X(t.image_url),alt:"Q",className:"w-full h-full object-cover"})}):t.media_id&&e.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400",children:e.jsx(re,{className:"w-5 h-5"})})}),e.jsxs("td",{className:"p-4 max-w-md group",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"truncate font-medium text-gray-900 dark:text-gray-100",title:t.question_text,children:t.question_text}),e.jsx("button",{onClick:()=>{ee(t),T(!0)},className:"p-1 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Edit Question",children:e.jsx(Te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 truncate",title:t.correct_answer,children:["Ans: ",t.correct_answer]})]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>we(t),className:O("p-1 rounded-full transition-colors",t.is_demo?"text-yellow-400 hover:text-yellow-500 bg-yellow-400/10":"text-gray-300 hover:text-yellow-400 dark:text-gray-600 dark:hover:text-yellow-400"),title:t.is_demo?"Remove from Demo":"Add to Demo",children:e.jsx(Be,{className:O("w-4 h-4",t.is_demo&&"fill-current")})})}),e.jsx("td",{className:"p-4 text-sm text-gray-700 dark:text-gray-300",children:{text_mcq:"Multiple Choice",image_identify_logo:"Logo Identification",image_identify_person:"Person Identification",personality:"Personality Identification",true_false:"True/False",short_answer:"Short Answer"}[t.question_type]||t.question_type.replace(/_/g," ")}),e.jsx("td",{className:"p-4 text-sm text-gray-700 dark:text-gray-300",children:t.category}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:O("px-2 py-1 rounded-full text-xs font-medium capitalize",t.difficulty==="easy"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t.difficulty==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:t.difficulty})}),e.jsx("td",{className:"p-4 text-sm font-medium text-gray-700 dark:text-gray-300",children:t.points}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:O("px-2 py-1 rounded-full text-xs font-medium capitalize",t.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t.status==="inactive"?"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"),children:t.status})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>je(t.id),className:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete",children:e.jsx(W,{className:"w-4 h-4"})})})]},t.id))})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",(i-1)*k+1," to ",Math.min(i*k,v)," of ",v," questions"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(t=>Math.max(1,t-1)),disabled:i===1,className:"p-2 border rounded hover:bg-gray-50 disabled:opacity-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(t=>t+1),disabled:i*k>=v,className:"p-2 border rounded hover:bg-gray-50 disabled:opacity-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:e.jsx(Ge,{className:"w-4 h-4"})})]})]})]}),e.jsx($,{open:me,onClose:()=>T(!1),title:Y?"Edit Question":"Create Question",className:"max-w-4xl",children:e.jsx(He,{question:Y,onSave:async()=>{T(!1),A()},onCancel:()=>T(!1)})}),e.jsx(Ze,{isOpen:pe,onClose:()=>K(!1),onSuccess:async()=>{A()}}),e.jsx($,{open:he,onClose:()=>R(!1),title:"Import Questions from JSON",className:"max-w-3xl",children:e.jsx(Xe,{onImportComplete:()=>{R(!1),A()},onCancel:()=>R(!1)})}),e.jsx($,{open:ye,onClose:()=>U(!1),title:"Import Question Bundle (ZIP)",className:"max-w-3xl",children:e.jsx($e,{onImportComplete:()=>{U(!1),A()},onCancel:()=>U(!1)})})]})}export{lt as Questions};
