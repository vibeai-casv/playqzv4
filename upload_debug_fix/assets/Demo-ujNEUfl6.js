import{j as e,c,a as ee}from"./index-Dylif5oX.js";import{u as se,r as i}from"./vendor-D8AvkUoV.js";import{I as R}from"./Image-CjmuA5Gf.js";import{j as M,Y as te,w as u,x as A,k as ie,J as ae,s as oe,T as le,h as re,X as ne}from"./ui-BDjwW725.js";function v({open:x,onClose:d,children:g}){return x?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-200",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-lg w-full relative shadow-2xl shadow-black/50 animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors","aria-label":"Close modal",children:e.jsx(ne,{className:"w-5 h-5"})}),g]})}):null}const he=()=>{const x=se(),[d,g]=i.useState([]),[o,b]=i.useState(0),[f,D]=i.useState({}),[L,F]=i.useState(!0),[y,k]=i.useState(!1),[r,T]=i.useState(!1),[O,P]=i.useState(0),[Y,w]=i.useState(!1),[q,m]=i.useState(!1),[B,C]=i.useState(!1),[S,X]=i.useState(""),[z,Q]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const{data:t}=await ee.get("/quiz/demo.php");g(t.questions)}catch(t){console.error("Failed to load demo quiz:",t),re.error("Failed to load demo quiz. Please try again.")}finally{F(!1)}})()},[]);const a=d[o],n=d.length,p=i.useCallback(s=>{if(!a||r)return;const t=parseInt(s.key,10);if(t>=1&&t<=4){const l=a.options?.[t-1];l&&_(l)}},[a,r]);i.useEffect(()=>(window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)),[p]);const _=i.useCallback(s=>{z||r||(D(t=>({...t,[a.id]:s})),o<n-1&&(Q(!0),setTimeout(()=>{b(t=>t+1),Q(!1)},800)))},[a,o,n,z,r]),J=()=>{o<n-1&&b(s=>s+1)},K=()=>{o>0&&b(s=>s-1)},Z=async()=>{k(!0);let s=0;d.forEach(t=>{f[t.id]===t.correct_answer&&s++}),await new Promise(t=>setTimeout(t,1e3)),P(s),T(!0),k(!1),m(!1)},$=s=>{X(s),C(!0)},E=i.useRef(null);if(i.useEffect(()=>{r||E.current?.focus()},[o,r]),L)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(M,{className:"w-8 h-8 animate-spin text-indigo-500"})});if(r)return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-24 h-24 bg-indigo-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(te,{className:"w-12 h-12 text-indigo-500"})}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Demo Completed!"}),e.jsxs("p",{className:"text-xl text-slate-400",children:["You scored ",e.jsx("span",{className:"text-indigo-400 font-bold",children:O})," out of ",e.jsx("span",{className:"text-white font-bold",children:n})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Review Answers"}),d.map((s,t)=>{const l=f[s.id],U=l===s.correct_answer,V=!l;return e.jsx("div",{className:"bg-slate-900/50 border border-white/10 rounded-2xl p-6 space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:c("w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold shrink-0",U?"bg-green-500/20 text-green-500":V?"bg-slate-500/20 text-slate-500":"bg-red-500/20 text-red-500"),children:t+1}),e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:s.question_text}),s.image_url&&e.jsx(R,{src:s.image_url,alt:"Question",className:"max-h-48 rounded-lg border border-white/10"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.options?.map((j,W)=>{const I=l===j,h=j===s.correct_answer;let N="bg-white/5 border-transparent text-slate-400";return h?N="bg-green-500/10 border-green-500/50 text-green-400":I&&!h&&(N="bg-red-500/10 border-red-500/50 text-red-400"),e.jsxs("div",{className:c("p-3 rounded-lg border text-sm flex items-center justify-between",N),children:[e.jsx("span",{children:j}),h&&e.jsx(u,{className:"w-4 h-4 text-green-500"}),I&&!h&&e.jsx(A,{className:"w-4 h-4 text-red-500"})]},W)})})]})]})},s.id)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/50 to-slate-900/50 border border-indigo-500/20 rounded-2xl p-8 text-center space-y-6 mt-12",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Ready to create your own quizzes?"}),e.jsx("p",{className:"text-slate-400 leading-relaxed max-w-2xl mx-auto",children:"Sign up now to access the full question bank, create custom quizzes, track your progress, and more!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-4",children:[e.jsxs("button",{onClick:()=>x("/signup"),className:"btn-vibeai flex items-center justify-center gap-2 px-8 py-3 text-lg shadow-lg shadow-indigo-500/20",children:["Create Free Account ",e.jsx(ie,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:()=>x("/login"),className:"px-8 py-3 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-medium transition-colors",children:"Back to Login"})]})]})]});if(!a)return null;const G=f[a.id],H=(o+1)/n*100;return e.jsxs("div",{className:"max-w-5xl mx-auto p-4 md:p-6 space-y-6",children:[e.jsxs("header",{className:"bg-slate-900/50 backdrop-blur-sm border border-white/5 p-4 rounded-2xl flex items-center justify-between sticky top-4 z-30 shadow-lg shadow-black/20",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-bold",children:"Demo Quiz"}),e.jsxs("span",{className:"text-xl font-bold text-white",children:[e.jsx("span",{className:"text-indigo-400",children:o+1}),e.jsx("span",{className:"text-slate-600 mx-1",children:"/"}),n]})]}),e.jsx("div",{className:"hidden md:block h-8 w-px bg-white/10"}),e.jsx("div",{className:"hidden md:block w-32 h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-500 ease-out",style:{width:`${H}%`}})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"px-3 py-1.5 rounded-lg bg-indigo-500/10 border border-indigo-500/30 text-indigo-400 text-sm font-medium",children:"Demo Mode"}),e.jsx("button",{onClick:()=>w(!0),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Exit Quiz",children:e.jsx(A,{className:"w-6 h-6"})})]})]}),e.jsxs("section",{className:"bg-slate-900/50 backdrop-blur-sm rounded-3xl border border-white/5 p-6 md:p-10 shadow-xl min-h-[400px] flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-tight mb-8",children:a.question_text}),a.image_url&&e.jsxs("div",{className:"mb-8 relative group w-full max-w-2xl mx-auto rounded-2xl overflow-hidden border border-white/10 bg-black/20 cursor-zoom-in",onClick:()=>$(a.image_url),children:[e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:e.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-white font-medium px-4 py-2 bg-black/50 rounded-full backdrop-blur-sm transition-opacity",children:"Click to zoom"})}),e.jsx(R,{src:a.image_url,alt:"Question illustration",className:"w-full h-auto max-h-96 object-contain"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.options?.map((s,t)=>{const l=G===s;return e.jsxs("button",{ref:t===0?E:void 0,onClick:()=>_(s),className:c("group relative p-5 rounded-xl text-left transition-all duration-200 border-2 outline-none",l?"bg-indigo-600/20 border-indigo-500 shadow-[0_0_15px_-3px_rgba(99,102,241,0.4)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"),children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:c("flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold mr-4 transition-colors",l?"bg-indigo-500 text-white":"bg-white/10 text-slate-400 group-hover:bg-white/20 group-hover:text-white"),children:String.fromCharCode(65+t)}),e.jsx("span",{className:c("text-lg font-medium transition-colors",l?"text-white":"text-slate-300 group-hover:text-white"),children:s})]}),l&&e.jsx("div",{className:"absolute top-5 right-5",children:e.jsx(u,{className:"w-5 h-5 text-indigo-400"})})]},s)})})]}),e.jsxs("div",{className:"mt-10 pt-6 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("button",{onClick:K,disabled:o===0,className:c("flex items-center px-6 py-3 rounded-xl font-medium transition-all",o===0?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:text-white hover:bg-white/5"),children:[e.jsx(ae,{className:"w-5 h-5 mr-2"})," Previous"]}),o<n-1?e.jsxs("button",{onClick:J,className:"flex items-center px-8 py-3 rounded-xl bg-white text-indigo-950 font-bold hover:bg-indigo-50 transition-all shadow-lg hover:shadow-white/10 transform hover:-translate-y-0.5",children:["Next ",e.jsx(oe,{className:"w-5 h-5 ml-2"})]}):e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center px-8 py-3 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-500/25 transform hover:-translate-y-0.5",children:["Submit Quiz ",e.jsx(u,{className:"w-5 h-5 ml-2"})]})]})]}),e.jsx(v,{open:Y,onClose:()=>w(!1),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(le,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Exit Demo?"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Are you sure you want to leave? Your progress will not be saved."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2.5 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>x("/login"),className:"px-6 py-2.5 rounded-xl bg-red-600 text-white hover:bg-red-500 font-medium transition-colors shadow-lg shadow-red-600/20",children:"Exit"})]})]})}),e.jsx(v,{open:q,onClose:()=>m(!1),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{className:"w-8 h-8 text-indigo-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Submit Demo?"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Ready to see your score?"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-6 py-2.5 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-medium transition-colors",children:"Review"}),e.jsxs("button",{onClick:Z,disabled:y,className:"px-6 py-2.5 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 font-medium transition-colors shadow-lg shadow-indigo-600/20 flex items-center",children:[y?e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}):null,"See Results"]})]})]})}),e.jsx(v,{open:B,onClose:()=>C(!1),children:S&&e.jsx("img",{src:S,alt:"Zoomed",className:"max-w-full max-h-[80vh] object-contain mx-auto rounded-lg"})})]})};export{he as Demo};
