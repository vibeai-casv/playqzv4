import{r as i}from"./vendor-D8AvkUoV.js";import{a as o}from"./index-Dylif5oX.js";function U(){const[l,a]=i.useState(!1),[u,s]=i.useState(null),p=async r=>{a(!0),s(null);try{const e={...r},t=await o.get("/admin/users.php",{params:e});return{users:t.data.users,total:t.data.total}}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},d=async r=>{a(!0),s(null);try{const e={...r};r?.startDate&&(e.startDate=r.startDate.toISOString()),r?.endDate&&(e.endDate=r.endDate.toISOString());const t=await o.get("/analytics/logs.php",{params:e});return{logs:t.data.logs,total:t.data.total}}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},f=async r=>{a(!0),s(null);try{const e=await o.get("/admin/user_activity.php",{params:{userId:r}});return{logins:e.data.logins,attempts:e.data.attempts,activity:e.data.activity}}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},y=async(r,e,t)=>{a(!0),s(null);try{await o.post("/admin/toggle_user.php",{userId:r,disabled:e,reason:t})}catch(n){const c=n instanceof Error?n.message:"An error occurred";throw s(c),n}finally{a(!1)}},g=async(r,e)=>{a(!0),s(null);try{await o.post("/admin/update_role.php",{user_id:r,role:e})}catch(t){const n=t instanceof Error?t.message:"An error occurred";throw s(n),t}finally{a(!1)}},h=i.useCallback(async r=>{a(!0),s(null);try{const e=await o.get("/questions/list.php",{params:{...r,_t:Date.now()}});return{questions:e.data.data,total:e.data.total}}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},[]);return{isLoading:l,error:u,fetchUsers:p,fetchUserActivity:f,fetchActivityLogs:d,toggleUserStatus:y,updateUserRole:g,fetchQuestions:h,createQuestion:async r=>{a(!0),s(null);try{return(await o.post("/questions/create.php",r)).data}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},updateQuestion:async(r,e)=>{a(!0),s(null);try{return(await o.post("/questions/update.php",{id:r,...e})).data.data}catch(t){const n=t instanceof Error?t.message:"An error occurred";throw s(n),t}finally{a(!1)}},deleteQuestion:async r=>{a(!0),s(null);try{await o.post("/questions/delete.php",{id:r})}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},generateQuestions:async r=>{a(!0),s(null);try{return(await o.post("/admin/generate_questions.php",r)).data}catch(e){const t=e.response?.data?.error||(e instanceof Error?e.message:"An error occurred");throw s(t),new Error(t)}finally{a(!1)}},fetchMedia:async r=>{a(!0),s(null);try{const e=await o.get("/media/list.php",{params:r});return{media:e.data.media,total:e.data.total}}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},uploadMedia:async(r,e,t)=>{a(!0),s(null);try{const n=new FormData;return n.append("file",r),n.append("type",e),t&&n.append("description",t),(await o.post("/media/upload.php",n,{headers:{"Content-Type":"multipart/form-data"}})).data.media}catch(n){const c=n instanceof Error?n.message:"An error occurred";throw s(c),n}finally{a(!1)}},deleteMedia:async r=>{a(!0),s(null);try{await o.post("/media/delete.php",{id:r})}catch(e){const t=e instanceof Error?e.message:"An error occurred";throw s(t),e}finally{a(!1)}},fetchAnalytics:async(r,e)=>{a(!0),s(null);try{const t={};return r&&(t.startDate=r.toISOString()),e&&(t.endDate=e.toISOString()),(await o.get("/admin/analytics.php",{params:t})).data}catch(t){const n=t instanceof Error?t.message:"An error occurred";throw s(n),t}finally{a(!1)}},fetchDailyStats:async()=>[],fetchCategoryStats:async()=>[],fetchRegistrationStats:async()=>[],fetchMetadata:async()=>{a(!0),s(null);try{return(await o.get("/metadata/list.php")).data}catch(r){const e=r instanceof Error?r.message:"An error occurred";return s(e),{categories:[],types:[],difficulties:[],tags:[]}}finally{a(!1)}}}}export{U as u};
